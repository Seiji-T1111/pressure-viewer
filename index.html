<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>過去14日間の東京の気圧</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { font-family: sans-serif; margin: 20px; background: #f8f9fa; }
  h1 { font-size: 1.4em; }
  #chartContainer { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
</style>
</head>
<body>
<h1>過去14日間の東京の気圧</h1>
<div id="chartContainer">
  <canvas id="pressureChart"></canvas>
</div>
<script>
(async function() {
  const lat = 35.6895;
  const lon = 139.6917;
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&hourly=pressure_msl&timezone=Asia/Tokyo&past_days=14`;

  const res = await fetch(url);
  const data = await res.json();
  const times = data.hourly.time;
  const pressures = data.hourly.pressure_msl;

  new Chart(document.getElementById('pressureChart'), {
    type: 'line',
    data: {
      labels: times.map(t => t.replace('T', ' ')),
      datasets: [{
        label: '気圧 (hPa)',
        data: pressures,
        borderColor: 'rgba(54, 162, 235, 1)',
        backgroundColor: 'rgba(54, 162, 235, 0.2)',
        fill: true,
        tension: 0.2
      }]
    },
    options: {
      scales: {
        x: {
          ticks: {
            maxRotation: 0
          }
        },
        y: {
          suggestedMin: 980,
          suggestedMax: 1030
        }
      }
    }
  });
})();
</script>
</body>
</html>
